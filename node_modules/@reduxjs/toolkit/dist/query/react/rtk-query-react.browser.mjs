import{buildCreateApi as Pe,coreModule as Oe}from"@reduxjs/toolkit/query";import"@reduxjs/toolkit";function J(e){return e.type==="query"}function Y(e){return e.type==="mutation"}function w(e,...i){return Object.assign(e,...i)}function q(e){return e.replace(e[0],e[0].toUpperCase())}import{createAction as He,createSlice as Le,createSelector as qe,createAsyncThunk as Ie,combineReducers as Ce,createNextState as Ke,isAnyOf as Ve,isAllOf as _e,isAction as je,isPending as We,isRejected as $e,isFulfilled as Ge,isRejectedWithValue as Ze,isAsyncThunkAction as Je,prepareAutoBatched as Ye,SHOULD_AUTOBATCH as Xe,isPlainObject as $,nanoid as et}from"@reduxjs/toolkit";import{formatProdErrorMessage as fe}from"@reduxjs/toolkit";import"@reduxjs/toolkit";import{QueryStatus as le,skipToken as K}from"@reduxjs/toolkit/query";import{useCallback as V,useDebugValue as ne,useEffect as F,useLayoutEffect as Qe,useMemo as B,useRef as O,useState as re}from"react";import{shallowEqual as Z}from"react-redux";var X=WeakMap?new WeakMap:void 0,ee=({endpointName:e,queryArgs:i})=>{let T="",g=X?.get(i);if(typeof g=="string")T=g;else{let m=JSON.stringify(i,(R,S)=>$(S)?Object.keys(S).sort().reduce((h,b)=>(h[b]=S[b],h),{}):S);$(i)&&X?.set(i,m),T=m}return`${e}(${T})`};var I=Symbol();import{useEffect as ae,useRef as ye,useMemo as pe}from"react";function G(e,i,T,g){let m=pe(()=>({queryArgs:e,serialized:typeof e=="object"?i({queryArgs:e,endpointDefinition:T,endpointName:g}):e}),[e,i,T,g]),R=ye(m);return ae(()=>{R.current.serialized!==m.serialized&&(R.current=m)},[m]),R.current.serialized===m.serialized?R.current.queryArgs:e}import{useEffect as de,useRef as ce}from"react";import{shallowEqual as te}from"react-redux";function C(e){let i=ce(e);return de(()=>{te(i.current,e)||(i.current=e)},[e]),te(i.current,e)?i.current:e}var Te=typeof window<"u"&&window.document&&window.document.createElement?Qe:F,ge=e=>e.isUninitialized?{...e,isUninitialized:!1,isFetching:!0,isLoading:e.data===void 0,status:le.pending}:e;function ie({api:e,moduleOptions:{batch:i,hooks:{useDispatch:T,useSelector:g,useStore:m},unstable__sideEffectsInRender:R,createSelector:S},serializeQueryArgs:h,context:b}){let U=R?t=>t():F;return{buildQueryHooks:M,buildMutationHook:z,usePrefetch:j};function _(t,d,a){if(d?.endpointName&&t.isUninitialized){let{endpointName:o}=d,l=b.endpointDefinitions[o];h({queryArgs:d.originalArgs,endpointDefinition:l,endpointName:o})===h({queryArgs:a,endpointDefinition:l,endpointName:o})&&(d=void 0)}let f=t.isSuccess?t.data:d?.data;f===void 0&&(f=t.data);let s=f!==void 0,r=t.isLoading,n=!s&&r,u=t.isSuccess||r&&s;return{...t,data:f,currentData:t.data,isFetching:r,isLoading:n,isSuccess:u}}function j(t,d){let a=T(),f=C(d);return V((s,r)=>a(e.util.prefetch(t,s,{...f,...r})),[t,a,f])}function M(t){let d=(s,{refetchOnReconnect:r,refetchOnFocus:n,refetchOnMountOrArgChange:u,skip:o=!1,pollingInterval:l=0,skipPollingIfUnfocused:y=!1}={})=>{let{initiate:k}=e.endpoints[t],p=T(),c=O();if(!c.current){let E=p(e.internalActions.internal_getRTKQSubscriptions());c.current=E}let x=G(o?K:s,ee,b.endpointDefinitions[t],t),Q=C({refetchOnReconnect:r,refetchOnFocus:n,pollingInterval:l,skipPollingIfUnfocused:y}),A=O(!1),D=O(),{queryCacheKey:P,requestId:H}=D.current||{},N=!1;P&&H&&(N=c.current.isRequestSubscribed(P,H));let v=!N&&A.current;return U(()=>{A.current=N}),U(()=>{v&&(D.current=void 0)},[v]),U(()=>{let E=D.current;if(typeof process<"u",x===K){E?.unsubscribe(),D.current=void 0;return}let W=D.current?.subscriptionOptions;if(!E||E.arg!==x){E?.unsubscribe();let L=p(k(x,{subscriptionOptions:Q,forceRefetch:u}));D.current=L}else Q!==W&&E.updateSubscriptionOptions(Q)},[p,k,u,x,Q,v]),F(()=>()=>{D.current?.unsubscribe(),D.current=void 0},[]),B(()=>({refetch:()=>{if(!D.current)throw new Error(fe(38));return D.current?.refetch()}}),[])},a=({refetchOnReconnect:s,refetchOnFocus:r,pollingInterval:n=0,skipPollingIfUnfocused:u=!1}={})=>{let{initiate:o}=e.endpoints[t],l=T(),[y,k]=re(I),p=O(),c=C({refetchOnReconnect:s,refetchOnFocus:r,pollingInterval:n,skipPollingIfUnfocused:u});U(()=>{let A=p.current?.subscriptionOptions;c!==A&&p.current?.updateSubscriptionOptions(c)},[c]);let x=O(c);U(()=>{x.current=c},[c]);let Q=V(function(A,D=!1){let P;return i(()=>{p.current?.unsubscribe(),p.current=P=l(o(A,{subscriptionOptions:x.current,forceRefetch:!D})),k(A)}),P},[l,o]);return F(()=>()=>{p?.current?.unsubscribe()},[]),F(()=>{y!==I&&!p.current&&Q(y,!0)},[y,Q]),B(()=>[Q,y],[Q,y])},f=(s,{skip:r=!1,selectFromResult:n}={})=>{let{select:u}=e.endpoints[t],o=G(r?K:s,h,b.endpointDefinitions[t],t),l=O(),y=B(()=>S([u(o),(Q,A)=>A,Q=>o],_,{memoizeOptions:{resultEqualityCheck:Z}}),[u,o]),k=B(()=>n?S([y],n,{devModeChecks:{identityFunctionCheck:"never"}}):y,[y,n]),p=g(Q=>k(Q,l.current),Z),c=m(),x=y(c.getState(),l.current);return Te(()=>{l.current=x},[x]),p};return{useQueryState:f,useQuerySubscription:d,useLazyQuerySubscription:a,useLazyQuery(s){let[r,n]=a(s),u=f(n,{...s,skip:n===I}),o=B(()=>({lastArg:n}),[n]);return B(()=>[r,u,o],[r,u,o])},useQuery(s,r){let n=d(s,r),u=f(s,{selectFromResult:s===K||r?.skip?void 0:ge,...r}),{data:o,status:l,isLoading:y,isSuccess:k,isError:p,error:c}=u;return ne({data:o,status:l,isLoading:y,isSuccess:k,isError:p,error:c}),B(()=>({...u,...n}),[u,n])}}}function z(t){return({selectFromResult:d,fixedCacheKey:a}={})=>{let{select:f,initiate:s}=e.endpoints[t],r=T(),[n,u]=re();F(()=>()=>{n?.arg.fixedCacheKey||n?.reset()},[n]);let o=V(function(W){let L=r(s(W,{fixedCacheKey:a}));return u(L),L},[r,s,a]),{requestId:l}=n||{},y=B(()=>f({fixedCacheKey:a,requestId:n?.requestId}),[a,n,f]),k=B(()=>d?S([y],d):y,[d,y]),p=g(k,Z),c=a==null?n?.arg.originalArgs:void 0,x=V(()=>{i(()=>{n&&u(void 0),a&&r(e.internalActions.removeMutationResult({requestId:l,fixedCacheKey:a}))})},[r,a,n,l]),{endpointName:Q,data:A,status:D,isLoading:P,isSuccess:H,isError:N,error:v}=p;ne({endpointName:Q,data:A,status:D,isLoading:P,isSuccess:H,isError:N,error:v});let E=B(()=>({...p,originalArgs:c,reset:x}),[p,c,x]);return B(()=>[o,E],[o,E])}}}import{batch as Re,useDispatch as De,useSelector as me,useStore as xe}from"react-redux";import{createSelector as Se}from"reselect";var se=Symbol(),oe=({batch:e=Re,hooks:i={useDispatch:De,useSelector:me,useStore:xe},createSelector:T=Se,unstable__sideEffectsInRender:g=!1,...m}={})=>({name:se,init(R,{serializeQueryArgs:S},h){let b=R,{buildQueryHooks:U,buildMutationHook:_,usePrefetch:j}=ie({api:R,moduleOptions:{batch:e,hooks:i,unstable__sideEffectsInRender:g,createSelector:T},serializeQueryArgs:S,context:h});return w(b,{usePrefetch:j}),w(h,{batch:e}),{injectEndpoint(M,z){if(J(z)){let{useQuery:t,useLazyQuery:d,useLazyQuerySubscription:a,useQueryState:f,useQuerySubscription:s}=U(M);w(b.endpoints[M],{useQuery:t,useLazyQuery:d,useLazyQuerySubscription:a,useQueryState:f,useQuerySubscription:s}),R[`use${q(M)}Query`]=t,R[`useLazy${q(M)}Query`]=d}else if(Y(z)){let t=_(M);w(b.endpoints[M],{useMutation:t}),R[`use${q(M)}Mutation`]=t}}}}});export*from"@reduxjs/toolkit/query";import{formatProdErrorMessage as Ae}from"@reduxjs/toolkit";import{configureStore as Be}from"@reduxjs/toolkit";import{useContext as he}from"react";import{useEffect as be}from"react";import ue from"react";import{Provider as ke,ReactReduxContext as Ee}from"react-redux";import{setupListeners as Me}from"@reduxjs/toolkit/query";function Ue(e){let i=e.context||Ee;if(he(i))throw new Error(Ae(35));let[g]=ue.useState(()=>Be({reducer:{[e.api.reducerPath]:e.api.reducer},middleware:m=>m().concat(e.api.middleware)}));return be(()=>e.setupListeners===!1?void 0:Me(g.dispatch,e.setupListeners),[e.setupListeners,g.dispatch]),ue.createElement(ke,{store:g,context:i},e.children)}var Lt=Pe(Oe(),oe());export{Ue as ApiProvider,Lt as createApi,oe as reactHooksModule,se as reactHooksModuleName};
//# sourceMappingURL=rtk-query-react.browser.mjs.map